<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="6.808 : Mobile and Sensor Computing Course">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/default.min.css">
    <script src="https:////cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
    <script>
    hljs.initHighlightingOnLoad();
    </script>

    <script src="javascripts/tabs.js"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/tabs.css">
 

    <title>6.808 - Lab 0</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">

          <h1 id="project_title">6.808</h1>
          <h2 id="project_tagline">Lab 0</h2>
          <font color="white">Assigned: 2019-02-06<br>
          <b>Due</b>: 2019-02-13</font>
          <br>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">


[ <a href="#layout">Xcode's Layout</a>
| <a href="#xcode-shortcuts">Xcode Shortcuts</a>
| <a href="#xcode-docs">Xcode Docs</a>
| <a href="#assignment">Lab Assignment</a>
]

<p>In this lab, we cover the basics of the Xcode IDE, the iOS Simulator, Xcode's Documentation Viewer, and the Objective-C (or the Swift) programming language. By the end of lab, we'll have built a simple iPhone application that displays weather from the <a href="https://wunderground.com">wunderground.com</a> API.</p>

<p>To complete this lab, you'll need to download <a href="macappstores://itunes.apple.com/us/app/xcode/id497799835">Xcode</a>. If you don't have a Mac of your own, you can use one of the Macs in the EECS lab, 38-530.</p>

<p>You can do this lab in either Swift or Objective-C. We provide instructions for both languages. Swift is a more modern language; for example, it eliminates the need for separate header files, supports type inference, and uses syntax for function calls and string operations that is closer to that of other newer languages. If you do not have experience in either language, we recommend using Swift.</p>

<hr>

<h2 id="layout">First, a little about Xcode's layout:</h2>
<img src="images/lab0/xcode_layout.png" title="panels: left: navigator, top: menu, right: utilities (right top: inspector, right bottom: library) bottom: debugger (bottom left:variables, bottom right:console)" />

<br />

<img src="images/lab0/toggle_buttons.png" title="buttons (left to right): Single (standard) editor, Assistant (split screen) editor, Version (git) editor | Toggle Nagivator, Toggle Debugger, Toggle Utilities" alt="">

<hr>

<h2 id="xcode-shortcuts">Some helpful Xcode shortcuts and tips</h2>
<table>
  <tr>
    <td>View Documentation:</td>
    <td>&#x2325;+Click</td>
  </tr>
  <tr>
    <td>Open Docs:</td>
    <td>&#x21e7;&#x2318;<span style="font-family:Monaco;">0</span></td>
  </tr>
  <tr>
    <td>Go to Definition:</td>
    <td>&#x2318;+Click</td>
  </tr>
  <tr>
    <td>Open file Quickly:</td>
    <td>&#x21e7;&#x2318;O</td>
  </tr>
</table>
<p>&#x2318; = Command      |      &#x2325; = Option      |      &#x21E7; = Shift</p>

<hr>

<h2 id="sim-shortcuts">Some helpful iOS Simulator shortcuts and tips</h2>
<table>
  <tr>
    <td>Press Home Button:</td>
    <td>&#x21e7;&#x2318;H</td>
  </tr>
  <tr>
    <td>Rotate Left</td>
    <td>&#x2318;&#8592;</td>
  </tr>
  <tr>
    <td>Rotate Right</td>
    <td>&#x2318;&#8594;</td>
  </tr>
  <tr>
    <td>If the keyboard isn't appearing/disappearing as expected:</td>
    <td>Hardware -> Keyboard</td>
  </tr>
</table>
&#x2318; = Command      |      &#x2325; = Option      |      &#x21E7; = Shift


<h2 id="xcode-docs">Xcode Documentation</h2>
<p>Shortcut: &#x21e7;&#x2318;0</p>
<img src="images/lab0/amazing.gif" alt="amazing">
<p>It's kind of amazing.</p>

<img src="images/lab0/slow.gif" alt="slow sloth stamping">
<p>It syncs locally, which takes a while</p>

<img src="images/lab0/speed.gif" alt="The Flash">
<p>But once it's downloaded, it's crazy fast.</p>

<img src="images/lab0/example.gif" alt="house">
<p>It includes ready-to-build example projects for downloads.</p>

<img src="images/lab0/option_click.gif" alt="option_click">
<p>You can get to class documentation by option + clicking the class in question.</p>

<h2>Some info about Swift</h2>

<p>As Swift is relatively easier than Objective-C, we don't have a long tutorial for it. </p>

<p>You may check <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/TheBasics.html#//apple_ref/doc/uid/TP40014097-CH5-ID309" target="_blank">Apple's programming guide of Swift</a> for details. </p>

<h2 id="assignment">On to your lab assignment!</h2>

<img src="images/lab0/lab_result.gif" alt="picture of iOS Simulator loading weather in a barebones app.">
<p>You're building an app that basically loads the weather.</p>

<p>The fetchWeather is asynchronous. If there's no network, the app shouldn't hang or crash.</p>

<p>We're using the Wunderground API. Here's a key for you: b901013c3100de66. This key will work for the lab, but has some usage limitations. You may probably want to get your own key for free from Wunderground. The JSON looks like <a href="https://api.wunderground.com/api/0b719bec26ab96ac/conditions/q/02139.json">http://api.wunderground.com/api/0b719bec26ab96ac/conditions/q/02139.json</a>.</p>

<p>We've recorded <a href="https://www.youtube.com/playlist?list=PLvcqxggo1z8GxADVB48Ts-CxsWFAtjg1u">videos</a> with exact instructions on how to complete the lab in Object-C and Swift. The goal is to get you comfortable with Xcode, the docs, the simulator, and Objective-C (or Swift). Maybe you'll even learn some shortcuts from watching them.</p>

<p>The videos build off of one another. You can do the assignment in your own way, or in the exact way it's done in the videos. It's entirely up to you.</p>


<h4>Video 1 - Hello World</h4>
<p>We create the project and print "Hello World". You'll also notice that we resize the simulator, and click on some of the menu bars. This just so that you see what those buttons do.</p>

<iframe width="560" height="315"
src="https://www.youtube.com/embed/JtbR3gY6YXY" frameborder="0" allowfullscreen>
</iframe>

<hr>
<hr>
<h4>Video 2 - Making a <code>Weather</code> Class </h4>
<p>Here, we define a weather class with some properties and methods</p>

<iframe width="560" height="315"
src="https://www.youtube.com/embed/Jvjs8ePFl2Y" frameborder="0" allowfullscreen>
</iframe>

<hr>
<hr>
<h4>Video 3 - Flushing out the <code>Weather</code> Methods</h4>
<p>We add some details to the weather methods from the previous video. In the next video, we instantiate the weather class, and debug it. This video contains an intentional error. We'll debug it in the next one. Note that the API shown in the Objective-C video is actually out of data. </p>

<iframe width="560" height="315"
src="https://www.youtube.com/embed/YYCasqQWSnU" frameborder="0" allowfullscreen>
</iframe>

<hr>
<hr>
<h4>Video 4 - Instantiating and Debugging <code>Weather</code></h4>
<p>There was an error with weather. We illustrate some of the tools the debugger has.</p>
<p>Using the debugger will make your life much, much easier, and we think it's worth learning.</p>

<iframe width="560" height="315"
src="https://www.youtube.com/embed/yIXXW55gwHw" frameborder="0" allowfullscreen>
</iframe>

<hr>
<hr>
<h4>Video 5 - Adding a button to the UX, defining constraints</h4>
<p>We add a new button to the interface and define its constraints.</p>
<p><strong>We're pressing the control key while dragging from the button to the <code>.h</code> file</strong></p>

<iframe width="560" height="315"
src="https://www.youtube.com/embed/aT5O_qyeQGk" frameborder="0" allowfullscreen>
</iframe>

<hr>
<hr>
<h4>Video 6 - Enabling the button</h4>
<p>This is pretty straightforward. We're making the button actually do stuff now.</p>
<p>Again remember to press the control key while dragging!</p>

<iframe width="560" height="315"
src="https://www.youtube.com/embed/evw_KboMG2Q" frameborder="0" allowfullscreen>
</iframe>

<hr>
<hr>
<h4>Video 7 - Adding more UI Elements</h4>
<p>We add some labels to display the weather. Note how we're using stack view here.</p>
<p>There are at least 5 ways to lay out elements in Xcode. This is probably the fastest.</p>

<iframe width="560" height="315"
src="https://www.youtube.com/embed/KWdTqycEP-E" frameborder="0" allowfullscreen>
</iframe>

<hr>
<hr>
<h4>Video 8 - Making the UI Labels Update</h4>
<p>We now update the UI Labels when results are fetched from the API</p>
<p>You may notice us fixing a misplaced view warning. The view was well defined, but the placement wasn't done correctly, so we ask Xcode to update the placement and the error goes away</p>

<iframe width="560" height="315"
src="https://www.youtube.com/embed/r55JUaOVh7k" frameborder="0" allowfullscreen>
</iframe>

<hr>
<hr>
<h4>Video 9 - UI Polish</h4>
<p>This is about showing and hiding the keyboard.</p>

<iframe width="560" height="315"
src="https://www.youtube.com/embed/kFcwheYqVKQ" frameborder="0" allowfullscreen>
</iframe>

<hr>
<hr>
<h4>Video 10 - Blocks and Async</h4>
<p>We update the app to work asynchronously. Mobile devices often have very flaky connections, so it's important to know how to deal with them.</p>

<p>We don't have a video here. Instead, we put the code of two important functions here. You may try them, or write your own.
<p>"Weather.swift": <code>fetchWeatherForZip</code> function</p>
<pre><code class="swift hljs">func fetchWeatherForZip(zip:String, completionHandler: @escaping (Bool) -> Void) -> Void
{
    NSLog("Getting conditions in %@", zip)
    let urlString : String = "https://api.wunderground.com/api/\(APP_ID)/conditions/q/\(zip).json"
    
    let weatherURL = URL(string: urlString)
    
    let session = URLSession.shared
    let request = URLRequest(url: weatherURL!, cachePolicy: URLRequest.CachePolicy.useProtocolCachePolicy, timeoutInterval: 5.0)
    
    let task = session.dataTask(with: request, completionHandler: {(data, response, error) in
            let ret = self.parseData(data: data)
        DispatchQueue.main.async(execute: {()->Void in completionHandler(ret)})
    })
    
    task.resume()
    
}
</code></pre>

<p>"ViewController.swift" <code>weatherButton</code> function (Button Handler)</p>
<pre><code class="swift hljs">@IBAction func weatherButton(_ sender: UIButton) {
        
        NSLog("Get Weather")
        sender.isEnabled = false
        weather.fetchWeatherForZip(zip: zipCode.text!, completionHandler: {(ret: Bool)->Void in
        if(ret)
        {
            NSLog("Succeeded")
            self.temperature.text = self.weather.currentTemp
            self.desc.text = self.weather.weatherDescription
            self.humidity.text = self.weather.relativeHumidity
            self.wind.text = self.weather.windString
            self.visibility.text = self.weather.visibilityKm
            
            }
        else{
            
            NSLog("Failed")
            }
            sender.isEnabled = true
        })
}
</code></pre>



<hr>
<hr>
<p>That's it for now. Have a good one!</p>
<img src="images/lab0/hack_the_planet.gif" alt="HACK THE PLANET!" title="There are no speed limits on the information highway.">

  </body>
</html>
